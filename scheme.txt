--
-- Spider database scheme
--

CREATE TABLE document (
	url VARCHAR(255),
	mime_type VARCHAR(255),
	last_fetched TIMESTAMP,
	proxy_id INTEGER,
	content TEXT,
	PRIMARY KEY (url)
);

CREATE TABLE proxy (
	id INTEGER PRIMARY KEY,
	protocol VARCHAR(16),
	address VARCHAR(255),
	port INTEGER,
	last_used TIMESTAMP,
	response_time INTEGER,
	status INTEGER,
	UNIQUE (protocol, address, port)
);

CREATE TABLE proxy_log (
	pid INTEGER,
	`timestamp` TIMESTAMP,
	response_time INTEGER,
	status INTEGER,
	details TEXT,
	FOREIGN KEY (pid) REFERENCES proxy(id)
);
